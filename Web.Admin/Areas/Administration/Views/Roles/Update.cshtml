@model TaskoMask.Application.Core.ViewModels.RoleDetailViewModel

@{
    ViewBag.Title = "Update Role";
}


<div class="grid-50 tablet-grid-50 mobile-grid-100">
    <div class="block">
        <div class="block-header">
            <h4>Basic Info</h4>
        </div>
        <div class="block-content">
            @await Html.PartialAsync("_SaveForm", Model)
        </div>
    </div>
</div>

<div class="grid-50 tablet-grid-50 mobile-grid-100">
    <div class="block">
        <div class="block-header">
            <h4>Operators</h4>
        </div>
        <div class="block-content has-table">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>@Html.LabelFor(model => model.Operators.FirstOrDefault().DisplayName)</th>
                            <th>@Html.LabelFor(model => model.Operators.FirstOrDefault().RolesId)</th>
                            <th><label></label></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.Operators)
                        {

                            <tr data-table-row-id="@item.Id">
                                <td>
                                    @item.DisplayName
                                </td>
                                <td>
                                    @item.RolesId.Count()
                                </td>

                                <td>
                                    <div class="btn-group-xs">
                                        <a href="@Url.Action( "update","operators", new { id = item.Id }) " class=" btn btn-primary btn-xs btn-xs-circle">
                                            <i class="fa fa-pencil"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        }

                    </tbody>
                </table>
            </div>

        </div>
    </div>
</div>

<div class="grid-100 tablet-grid-100 mobile-grid-100">
    <div class="block">
        <div class="block-header">
            <h4>Permissions</h4>
        </div>
        <div class="block-content has-table">
            <div class="table-responsive">
                <form class="form" asp-action="UpdatePermissions" data-ajax="true" data-ajax-loading="#global-ajax-loading" data-ajax-method="Post">

                    @Html.AntiForgeryToken()

                    <input type="hidden" name="id" value="@Model.Role.Id" />

                    @foreach (var group in Model.Permissions)
                    {
                        <div class="alert alert-info no-pad-tb">
                            <h3>@group.Key</h3>
                        </div>
                        <table class="table table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th><label></label></th>
                                    <th width="50"><label></label></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var permission in group.Value)
                                {
                                    <tr>
                                        <td>@permission.Text</td>
                                        <td><input type="checkbox" name="PermissionsId" value="@permission.Value" checked=@(permission.Selected == true ? "checked" : null ) /></td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    }

                    <button type="submit" class="btn btn-primary">
                        Save Permissions
                    </button>
                    <hr />
                </form>

            </div>

        </div>
    </div>
</div>
@section scripts{

}
