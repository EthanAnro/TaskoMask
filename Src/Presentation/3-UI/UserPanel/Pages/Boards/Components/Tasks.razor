@using TaskoMask.Application.Share.Dtos.Workspace.Tasks
@inject TaskoMask.Presentation.UI.UserPanel.Services.DragDrop.IDragDropService DragDropService

@foreach (var item in Model)
{
    <div class="card-hover rounded border p-3 mb-2 bg-light task-item" draggable="true" ondragstart="@(() => HandleDragStart(item.Id))">
        <a @onclick="@(()=>ShowDetailsModal(item.Id))" class="text-black">
            @item.Title
        </a>
    </div>
}

@code {

    [Parameter]
    public IEnumerable<TaskBasicInfoDto> Model { get; set; }

    [Parameter]
    public string CardId { get; set; }




    /// <summary>
    ///
    /// </summary>
    private void ShowDetailsModal(string taskId)
    {
        var parameters = new ModalParameters();
        parameters.Add(nameof(Pages.Tasks.Components.Details.TaskId), taskId);
        ModalService.Show<Pages.Tasks.Components.Details>("Task Details", parameters, new ModalOptions { DisableBackgroundCancel = true, ContentScrollable = true, Class = "blazored-modal w-75 h-75" });
    }



    /// <summary>
    ///
    /// </summary>
    private void HandleDragStart(string taskId)
    {
        DragDropService.SetDraggedData(taskId);
    }



}
