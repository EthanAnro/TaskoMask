@using TaskoMask.Application.Share.Dtos.Workspace.Tasks

<ul class="list-group list-group-flush">

    <li class="list-group-item list-group-item-warning">
        <b>
            <i class="bi bi-list-task"></i>
            <a @onclick="@(()=>ShowCreateTaskModal())" class="text-info">Add new Task</a>
        </b>
    </li>

    @if (Model.Any())
    {
        foreach (var item in Model)
        {
            <li class="list-group-item">
                <a @onclick="@(()=>ShowUpdateTaskModal(item.Id))" class="text-black">
                    <div>
                        <i class="bi bi-list-task"></i>
                        @item.Title

                    </div>
                </a>
            </li>
        }
    }
</ul>


@code {

    [Parameter]
    public IEnumerable<TaskBasicInfoDto> Model { get; set; }

    [Parameter]
    public string CardId { get; set; }



    /// <summary>
    ///
    /// </summary>
    private void ShowCreateTaskModal()
    {
        var parameters = new ModalParameters();
        parameters.Add(nameof(Pages.Tasks.Components.Upsert.CardId), CardId);
        ModalService.Show<Pages.Tasks.Components.Upsert>("Create Task", parameters, new ModalOptions { DisableBackgroundCancel = true });
    }


    /// <summary>
    ///
    /// </summary>
    private void ShowUpdateTaskModal(string taskId)
    {
        var parameters = new ModalParameters();
        parameters.Add(nameof(Pages.Tasks.Components.Upsert.TaskId), taskId);
        ModalService.Show<Pages.Tasks.Components.Upsert>("Update Task", parameters, new ModalOptions { DisableBackgroundCancel = true });
    }

}
