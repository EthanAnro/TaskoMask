@page "/"
@inject TaskoMask.Presentation.Framework.Share.Contracts.IOrganizationClientService OrganizationClientService
@if (!model.OrganizationsDetailsList.Any())
{
    <div class="alert alert-warning">
        You are not member of any organization!
        <br />
        Maybe you want to
        <a @onclick="@(() => ModalService.Show<Pages.Organizations.Create>("Create new organization",new ModalOptions{DisableBackgroundCancel=true}))" class="text-info" style="cursor:pointer">create one</a>
    </div>
}
else
{
    <div class="container py-3">
        <div class="row">
            <Organizations Model="@model.OrganizationsDetailsList" />
        </div>

    </div>
}


@code {

    private PanelDashboardViewModel model ;

    protected override async Task OnInitializedAsync()
    {
        model = new PanelDashboardViewModel();

        var organizationsDetailsListResult = await OrganizationClientService.Get();
        if (!organizationsDetailsListResult.IsSuccess)
            ToastService.ShowError(organizationsDetailsListResult.Errors.ParseToHtml(), organizationsDetailsListResult.Message);

        model.OrganizationsDetailsList = organizationsDetailsListResult.Value;

    }
}