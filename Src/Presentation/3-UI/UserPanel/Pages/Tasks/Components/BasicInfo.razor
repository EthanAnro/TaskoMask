@using TaskoMask.Application.Share.Dtos.Workspace.Tasks

<div class="list-group task-list-group mb-3">
    <div class="list-group-item task-list-group-header">
        <strong>
            <i class="bi bi-list-task"></i>
            Description
        </strong>
        <a @onclick="@(()=>ShowUpdateModal(Model.Id))" class="text-info float-right">
            edit task
        </a>
    </div>

    <div class="list-group-item task-list-group-item">
        @Model.Description
    </div>
</div>


@code {
    [Parameter]
    public TaskBasicInfoDto Model { get; set; }


    protected override Task OnInitializedAsync()
    {
        if (string.IsNullOrEmpty(Model.Description))
            Model.Description = "This task has not any description. you can add it by edit task link";

        return base.OnInitializedAsync();
    }

    /// <summary>
    ///
    /// </summary>
    private void ShowUpdateModal(string taskId)
    {
        var parameters = new ModalParameters();
        parameters.Add(nameof(Pages.Tasks.Components.UpdateTask.Id), taskId);
        ModalService.Show<Pages.Tasks.Components.UpdateTask>("Update Task", parameters, new ModalOptions { Class = "blazored-modal w-75 bg-light-gray" });
    }
}
